{% load django_browser_reload %}
{% load static %}

<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Sell</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href="{% static 'signin.css' %}">
    <script src="{% static 'signin.js' %}"></script>
</head>
<body>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <label>
        <input type="radio" name="sell_type" value="second_hand" checked> Sell Second-hand Item
    </label>
    <label>
        <input type="radio" name="sell_type" value="swap"> Swap Item
    </label>

    <!-- Common fields for both selling and swapping -->
    <label for="inputName">Name:</label>
    <input type="text" id="inputName" name="name"><br>
    <label for="inputDescription">Description:</label>
    <textarea id="inputDescription" name="description"></textarea><br>
    <label for="inputLocation">Location:</label>
    <input type="text" id="inputLocation" name="location"><br>
    <label for="inputCategory">Category:</label>
    <input type="text" id="inputCategory" name="category"><br>
    <label for="inputCondition">Condition:</label>
    <input type="text" id="inputCondition" name="condition"><br>

    <!-- Common field for both selling and swapping -->
    <label for="inputContacts">Contacts:</label>
    <input type="text" id="inputContacts" name="contacts"><br>

    <!-- Input field for images -->
    <label for="inputImages">Images1: </label>
    <input type="file" id="inputImages" name="images1" accept="image/*">
    <label for="inputImages">Images2:</label>
    <input type="file" id="inputImages" name="images2" accept="image/*">
    <label for="inputImages">Images3:</label>
    <input type="file" id="inputImages" name="images3" accept="image/*">
    <label for="inputImages">Images4:</label>
    <input type="file" id="inputImages" name="images4" accept="image/*">


    <!-- Fields specific to selling second-hand items -->
    <div id="second_hand_fields">
        <label for="inputPrice">Price:</label>
        <input type="text" id="inputPrice" name="price"><br>
        <label for="inputPaymentMethod">Payment Method:</label>
        <input type="text" id="inputPaymentMethod" name="payment_method"><br>
    </div>

    <!-- Fields specific to swapping products -->
    <div id="swap_fields" style="display: none;">  <!-- Hide swap fields by default -->
        <label for="inputSwapFor">Swap For:</label>
        <input type="text" id="inputSwapFor" name="swapfor"><br>
    </div>

    <button type="submit">Submit</button>
</form>

<h1> Currently selling: </h1>
<hr>
{% if currently_selling_items %}
    <ul>
    {% for item in currently_selling_items %}
    <a href="{% url 'itemroom' item.id %}"><h1>{{ item.name }}</h1></a>
    {% endfor %}
    </ul>
{% else %}
    <p>No items currently selling.</p>
{% endif %}

<hr>
<h1> Sold Items: </h1>
<hr>
{% if sold_items %}
    <ul>
    {% for item in sold_items %}
    <a href="{% url 'itemroom' item.id %}"><h1>{{ item.name }}</h1></a>
    {% endfor %}
    </ul>
{% else %}
    <p>No items sold yet.</p>
{% endif %}


<script>
    // Show or hide swap fields based on the selected sell type
    document.querySelectorAll('input[name="sell_type"]').forEach(function(radio) {
        radio.addEventListener('change', function() {
            document.getElementById('second_hand_fields').style.display = this.value === 'second_hand' ? 'block' : 'none';
            document.getElementById('swap_fields').style.display = this.value === 'swap' ? 'block' : 'none';
        });
    });
</script>

</body>
